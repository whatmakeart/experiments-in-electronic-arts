state machine - http://www.thebox.myzen.co.uk/Tutorial/State_Machine.html
